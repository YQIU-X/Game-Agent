# Game Agent 用户使用手册

## 1. 系统简介

### 1.1 什么是Game Agent
Game Agent是一个智能体训练与对战系统，支持DQN（深度Q网络）和PPO（近端策略优化）两种强化学习算法，专门用于训练AI智能体玩Super Mario Bros游戏。

### 1.2 主要功能
- **AI训练**: 支持DQN和PPO算法训练AI智能体
- **模型管理**: 管理训练好的模型文件
- **游戏对战**: 与AI智能体进行游戏对战
- **通关识别**: 自动识别和保存通关模型
- **实时监控**: 实时查看训练进度和游戏状态

### 1.3 系统要求
- **浏览器**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- **操作系统**: Windows 10+, macOS 10.15+, Linux Ubuntu 18.04+
- **网络**: 稳定的互联网连接
- **硬件**: 建议8GB+内存，支持GPU加速训练

## 2. 快速开始

### 2.1 访问系统
1. 打开浏览器，访问系统地址
2. 首次使用需要注册账号
3. 使用注册的账号登录系统

### 2.2 注册账号
1. 点击"注册"按钮
2. 输入用户名和密码
3. 点击"注册"完成账号创建
4. 系统会自动登录到主页面

### 2.3 登录系统
1. 在登录页面输入用户名和密码
2. 点击"登录"按钮
3. 登录成功后进入系统主页面

## 3. 开发者功能

### 3.1 训练控制

#### 3.1.1 选择算法
1. 进入"开发者"页面
2. 在"训练控制"区域选择算法类型：
   - **DQN**: 深度Q网络算法
   - **PPO**: 近端策略优化算法

#### 3.1.2 配置训练参数

**DQN参数配置**:
- **学习率**: 控制学习速度，推荐0.0001
- **折扣因子**: 控制未来奖励的重要性，推荐0.99
- **探索率**: 控制探索与利用的平衡，推荐1.0
- **批次大小**: 每次训练的样本数量，推荐32
- **训练轮数**: 总的训练episode数，推荐50000

**PPO参数配置**:
- **学习率**: 控制学习速度，推荐0.0001
- **折扣因子**: 控制未来奖励的重要性，推荐0.99
- **GAE参数**: 广义优势估计参数，推荐0.95
- **裁剪参数**: PPO裁剪参数，推荐0.2
- **价值函数系数**: 价值函数损失权重，推荐0.5
- **熵系数**: 熵正则化权重，推荐0.01
- **更新轮数**: PPO更新轮数，推荐4
- **小批次大小**: 小批次训练大小，推荐64

#### 3.1.3 开始训练
1. 配置好训练参数后，点击"开始训练"按钮
2. 系统会显示训练进度和实时指标
3. 训练过程中可以查看：
   - 当前episode数
   - 平均奖励
   - 最佳奖励
   - 训练时间
   - 损失值

#### 3.1.4 停止训练
1. 训练过程中点击"停止训练"按钮
2. 系统会保存当前训练进度
3. 训练停止后可以查看训练结果

#### 3.1.5 通关模型保存
- 当AI智能体成功通关时，系统会自动保存通关模型
- 通关模型文件名包含"clear"标识
- 通关模型会保存到对应的实验目录中

### 3.2 参数配置

#### 3.2.1 查看配置文件
1. 在"参数配置"区域选择文件类型：
   - **算法配置**: 查看算法参数文件
   - **游戏配置**: 查看游戏环境配置
2. 选择具体的配置文件
3. 系统会显示文件内容

#### 3.2.2 修改参数
1. 在文件内容区域直接编辑参数
2. 点击"保存"按钮保存修改
3. 系统会更新配置文件

#### 3.2.3 重置配置
1. 点击"重置配置"按钮
2. 系统会恢复到默认配置
3. 确认重置操作

#### 3.2.4 同步参数
1. 点击"同步到配置文件"按钮
2. 系统会将训练控制面板的参数同步到配置文件
3. 点击"从配置文件同步"按钮
4. 系统会将配置文件参数同步到训练控制面板

### 3.3 备份管理

#### 3.3.1 创建备份
1. 选择要备份的配置文件
2. 点击"创建备份"按钮
3. 输入备份名称
4. 系统会创建备份文件

#### 3.3.2 加载备份
1. 在备份列表中选择要加载的备份
2. 点击"加载备份"按钮
3. 系统会恢复备份的配置

#### 3.3.3 删除备份
1. 选择要删除的备份
2. 点击"删除备份"按钮
3. 确认删除操作

## 4. 玩家功能

### 4.1 游戏设置

#### 4.1.1 选择游戏
1. 进入"玩家"页面
2. 在"游戏选择"区域选择游戏类型
3. 目前支持"超级马里奥"游戏

#### 4.1.2 选择关卡
1. 在"关卡选择"下拉菜单中选择关卡
2. 支持的关卡：
   - 1-1, 1-2, 1-3, 1-4
   - 2-1, 2-2, 2-3, 2-4
   - 3-1, 3-2, 3-3

#### 4.1.3 选择智能体
1. 在"智能体选择"区域选择AI类型：
   - **DQN智能体**: 使用DQN算法训练的智能体
   - **PPO智能体**: 使用PPO算法训练的智能体

#### 4.1.4 选择权重文件
1. 选择智能体后，系统会显示可用的模型文件
2. 模型文件按以下方式显示：
   - **环境名称 - 算法类型 (会话ID)**
   - 例如：`SuperMarioBros-3-2-v0 - PPO (pretrained_1757645665)`
3. 选择要使用的模型文件

### 4.2 开始游戏

#### 4.2.1 启动游戏
1. 完成所有设置后，点击"开始游戏"按钮
2. 系统会启动游戏并显示游戏画面
3. 游戏启动后可以看到：
   - AI智能体的游戏画面
   - 玩家的游戏画面
   - 实时统计信息

#### 4.2.2 游戏控制
**玩家控制**:
- **A键/左箭头**: 向左移动
- **D键/右箭头**: 向右移动
- **W键/上箭头/空格**: 跳跃
- **S键/下箭头**: 下蹲
- **X键**: 攻击（右+攻击）
- **Z键**: 特殊动作（右+跳跃+攻击）

#### 4.2.3 游戏统计
游戏过程中会显示：
- **游戏时间**: 当前游戏进行时间
- **玩家奖励**: 玩家获得的奖励分数
- **智能体奖励**: AI智能体获得的奖励分数
- **玩家动作**: 玩家执行的动作记录
- **智能体动作**: AI智能体执行的动作记录

#### 4.2.4 结束游戏
1. 点击"结束游戏"按钮
2. 系统会停止游戏并显示最终统计
3. 可以查看游戏结果和性能对比

## 5. 高级功能

### 5.1 模型管理

#### 5.1.1 查看模型列表
1. 在"模型管理"页面查看所有可用模型
2. 模型按类型分类显示：
   - **Experiment**: 新格式模型（推荐）
   - **Pretrained**: 旧格式模型
   - **Legacy**: 最旧格式模型

#### 5.1.2 模型过滤
1. 选择算法类型过滤模型：
   - **DQN**: 只显示DQN模型
   - **PPO**: 只显示PPO模型
2. 系统会动态更新模型列表

#### 5.1.3 通关模型识别
- 通关模型会在文件名中包含"clear"标识
- 通关模型在模型列表中会有特殊标记
- 推荐使用通关模型进行游戏对战

### 5.2 实验管理

#### 5.2.1 查看实验记录
1. 在"实验管理"页面查看训练实验
2. 每个实验包含：
   - 实验ID
   - 算法类型
   - 环境名称
   - 训练参数
   - 训练结果
   - 模型文件

#### 5.2.2 训练指标
1. 查看训练过程中的指标变化
2. 支持的指标：
   - Episode奖励
   - 平均奖励
   - 最佳奖励
   - 训练损失
   - 通关状态

### 5.3 系统监控

#### 5.3.1 实时状态
1. 查看系统运行状态
2. 监控指标：
   - 在线用户数
   - 活跃训练任务
   - 系统资源使用
   - 网络连接状态

#### 5.3.2 日志查看
1. 查看系统日志
2. 日志类型：
   - 应用日志
   - 错误日志
   - 训练日志
   - 游戏日志

## 6. 常见问题

### 6.1 登录问题

**Q: 忘记密码怎么办？**
A: 目前系统不支持密码重置功能，请联系管理员重置密码。

**Q: 登录时提示"用户名或密码错误"？**
A: 请检查用户名和密码是否正确，注意大小写敏感。

**Q: 登录后页面显示异常？**
A: 请尝试刷新页面或清除浏览器缓存。

### 6.2 训练问题

**Q: 训练启动失败？**
A: 请检查：
- 训练参数是否合理
- 系统资源是否充足
- 网络连接是否正常

**Q: 训练过程中断？**
A: 可能原因：
- 系统资源不足
- 网络连接中断
- 训练参数设置不当

**Q: 如何提高训练效果？**
A: 建议：
- 调整学习率参数
- 增加训练轮数
- 使用更稳定的网络连接

### 6.3 游戏问题

**Q: 游戏无法启动？**
A: 请检查：
- 是否选择了正确的模型文件
- 系统资源是否充足
- 网络连接是否正常

**Q: 游戏画面卡顿？**
A: 可能原因：
- 系统性能不足
- 网络延迟过高
- 浏览器性能问题

**Q: 键盘控制无响应？**
A: 请确保：
- 游戏窗口处于焦点状态
- 浏览器支持键盘事件
- 没有其他程序占用键盘

### 6.4 模型问题

**Q: 找不到模型文件？**
A: 请检查：
- 是否完成了模型训练
- 模型文件是否保存在正确位置
- 是否有访问权限

**Q: 模型加载失败？**
A: 可能原因：
- 模型文件损坏
- 文件格式不兼容
- 权限不足

**Q: 如何识别通关模型？**
A: 通关模型特征：
- 文件名包含"clear"
- 在模型列表中有特殊标识
- 训练信息显示"stage_cleared: true"

## 7. 最佳实践

### 7.1 训练建议

#### 7.1.1 参数调优
- **学习率**: 从0.0001开始，根据训练效果调整
- **批次大小**: 根据系统内存调整，推荐32-64
- **训练轮数**: 至少10000轮，推荐50000轮以上

#### 7.1.2 训练策略
- 使用稳定的网络连接
- 避免在系统资源不足时训练
- 定期保存训练进度
- 监控训练指标变化

### 7.2 游戏建议

#### 7.2.1 模型选择
- 优先选择通关模型
- 根据关卡难度选择合适模型
- 尝试不同算法训练的模型

#### 7.2.2 游戏技巧
- 熟悉键盘控制
- 观察AI智能体的行为
- 学习AI的决策策略
- 对比不同模型的性能

### 7.3 系统使用

#### 7.3.1 性能优化
- 使用现代浏览器
- 确保系统资源充足
- 定期清理浏览器缓存
- 避免同时运行多个训练任务

#### 7.3.2 数据管理
- 定期备份重要配置
- 清理不需要的模型文件
- 监控磁盘空间使用
- 保存重要的训练结果

## 8. 技术支持

### 8.1 联系方式
- **技术支持邮箱**: support@gameagent.com
- **用户反馈邮箱**: feedback@gameagent.com
- **技术支持QQ群**: 123456789
- **在线帮助**: 系统内置帮助文档

### 8.2 反馈渠道
- **功能建议**: 通过邮箱或QQ群提交
- **问题报告**: 详细描述问题现象和复现步骤
- **使用体验**: 分享使用心得和改进建议

### 8.3 更新通知
- **版本更新**: 通过系统通知或邮件通知
- **功能更新**: 查看更新日志了解新功能
- **维护通知**: 提前通知系统维护时间

## 9. 附录

### 9.1 快捷键列表
| 功能 | 快捷键 | 说明 |
|------|--------|------|
| 登录 | Enter | 在登录页面按Enter键登录 |
| 刷新 | F5 | 刷新当前页面 |
| 返回 | Alt+← | 返回上一页面 |
| 全屏 | F11 | 切换全屏模式 |

### 9.2 游戏控制键
| 动作 | 按键 | 说明 |
|------|------|------|
| 向左 | A / ← | 角色向左移动 |
| 向右 | D / → | 角色向右移动 |
| 跳跃 | W / ↑ / 空格 | 角色跳跃 |
| 下蹲 | S / ↓ | 角色下蹲 |
| 攻击 | X | 右+攻击组合 |
| 特殊 | Z | 右+跳跃+攻击组合 |

### 9.3 系统配置参数
| 参数类型 | 参数名称 | 默认值 | 说明 |
|----------|----------|--------|------|
| DQN | 学习率 | 0.0001 | 控制学习速度 |
| DQN | 折扣因子 | 0.99 | 未来奖励权重 |
| DQN | 探索率 | 1.0 | 探索与利用平衡 |
| PPO | 学习率 | 0.0001 | 控制学习速度 |
| PPO | GAE参数 | 0.95 | 广义优势估计 |
| PPO | 裁剪参数 | 0.2 | PPO裁剪阈值 |

### 9.4 浏览器兼容性
| 浏览器 | 最低版本 | 推荐版本 | 支持状态 |
|--------|----------|----------|----------|
| Chrome | 90 | 96+ | ✅ 完全支持 |
| Firefox | 88 | 95+ | ✅ 完全支持 |
| Safari | 14 | 15+ | ✅ 完全支持 |
| Edge | 90 | 96+ | ✅ 完全支持 |

---

**用户使用手册编制**: 产品团队  
**手册版本**: v1.0.0  
**编制日期**: 2025年1月15日  
**适用系统版本**: Game Agent v1.0.0


